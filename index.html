<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sconee Archive</title>
    <style>
        /* =========================================
           1. ì „ì²´ í˜ì´ì§€ ê¸°ë³¸ ìŠ¤íƒ€ì¼
           ========================================= */
        body { 
            margin: 0; 
            padding: 0; 
            background-color: #121212; /* ë‹¤í¬ ëª¨ë“œ ë°°ê²½ */
            color: #ffffff;            /* ê¸°ë³¸ ê¸€ììƒ‰: í°ìƒ‰ */
            font-family: 'Helvetica Neue', sans-serif; 
        }
        
        /* =========================================
           2. í—¤ë” ì˜ì—­ (ë©”ì¸ íƒ€ì´í‹€ & ë°°ê²½)
           ========================================= */
        header { 
            height: 50vh; 
            background-size: cover; 
            background-position: center;
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
            text-align: center;
            position: relative;
        }

        /* íƒ€ì´í‹€ ìŠ¤íƒ€ì¼ (ì†Œë¬¸ì s ì ìš©ë¨) */
        h1 { 
            font-size: 3rem; 
            margin-bottom: 10px; 
            font-weight: 700; 
            letter-spacing: 1px; 
            text-shadow: 0 2px 10px rgba(0,0,0,0.5); 
        }
        
        p { 
            font-size: 1.2rem; 
            color: #e0e0e0; 
            text-shadow: 0 1px 5px rgba(0,0,0,0.5); 
        }

        /* =========================================
           3. ìŒì•… í”Œë ˆì´ì–´ ìœ„ì ¯ ìŠ¤íƒ€ì¼
           ========================================= */
        .music-widget {
            position: absolute; 
            top: 20px; 
            right: 30px;
            background: rgba(0, 0, 0, 0.6); /* ë°˜íˆ¬ëª… ë°°ê²½ */
            padding: 12px 25px; 
            border-radius: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);    /* ë¸”ëŸ¬ íš¨ê³¼ */
            z-index: 1000;
            display: flex; 
            gap: 20px; 
            align-items: center;
        }
        
        /* ì¥ë¥´ ì„ íƒ ë²„íŠ¼ ê·¸ë£¹ */
        .music-mood-btns { 
            display: flex; 
            gap: 15px; 
        }
        
        .mood-btn {
            background: transparent; 
            border: none;
            color: #888; /* ê¸°ë³¸ìƒ‰: íšŒìƒ‰ */
            font-size: 0.9rem; 
            font-weight: 500; 
            cursor: pointer;
            padding: 4px 0; 
            transition: all 0.3s ease;
        }
        
        .mood-btn:hover { 
            color: #ccc; 
        }
        
        /* ì„ íƒëœ ì¥ë¥´ ê°•ì¡° (í°ìƒ‰ + ë°‘ì¤„) */
        .mood-btn.active { 
            color: #fff; 
            font-weight: 700; 
            border-bottom: 2px solid #fff; 
        }

        /* ì¬ìƒ/ì •ì§€ ë²„íŠ¼ */
        #play-btn {
            background: rgba(255,255,255,0.1); 
            color: #fff; 
            border: 1px solid rgba(255,255,255,0.3);
            padding: 8px 18px; 
            border-radius: 20px;
            cursor: pointer; 
            font-size: 0.85rem; 
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        #play-btn:hover { 
            background: #fff; 
            color: #000; 
        }
        
        /* ì¬ìƒ ì¤‘ì¼ ë•Œ ë²„íŠ¼ íš¨ê³¼ (íŒŒìŠ¤í…” ë ˆë“œ + ê¹œë¹¡ì„) */
        #play-btn.playing {
            background: #e2a8a8; 
            border-color: #e2a8a8; 
            color: #000;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(226, 168, 168, 0.6); }
            70% { box-shadow: 0 0 0 8px rgba(226, 168, 168, 0); }
            100% { box-shadow: 0 0 0 0 rgba(226, 168, 168, 0); }
        }

        /* =========================================
           4. 3ë‹¨ í•„í„° (Space, Vibe, Detail)
           ========================================= */
        .filter-section { 
            padding: 30px 40px; 
            background-color: #1a1a1a; 
            border-bottom: 1px solid #333; 
        }
        
        .filter-row { 
            display: flex; 
            align-items: center; 
            margin-bottom: 20px; 
            flex-wrap: wrap; 
        }
        
        .filter-label { 
            width: 80px; 
            font-size: 0.85rem; 
            color: #666; 
            font-weight: bold; 
            text-transform: uppercase; 
        }
        
        .filter-group { 
            display: flex; 
            gap: 10px; 
            flex-wrap: wrap; 
        }
        
        .filter-btn {
            background: #333; 
            border: 1px solid #444; 
            color: #ccc;
            padding: 8px 16px; 
            border-radius: 15px; 
            cursor: pointer; 
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }
        
        .filter-btn:hover, .filter-btn.active { 
            background: #fff; 
            color: #000; 
            border-color: #fff; 
        }

        /* =========================================
           5. ê°¤ëŸ¬ë¦¬ ê·¸ë¦¬ë“œ (ì‚¬ì§„ ëª©ë¡)
           ========================================= */
        .gallery-grid {
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px; 
            padding: 40px; 
            min-height: 50vh;
        }
        
        .gallery-item { 
            background: #1e1e1e; 
            border-radius: 8px; 
            overflow: hidden; 
            transition: transform 0.3s ease; 
        }
        
        .gallery-item:hover { 
            transform: translateY(-5px); 
        }
        
        .gallery-item img { 
            width: 100%; 
            height: 250px; 
            object-fit: cover; 
            display: block; 
        }
        
        .info { 
            padding: 20px; 
        }
        
        .info h3 { 
            margin: 0 0 10px 0; 
            font-size: 1.1rem; 
            color: #fff; 
        }
        
        /* íƒœê·¸ ë±ƒì§€ ìŠ¤íƒ€ì¼ */
        .tags-row { 
            display: flex; 
            gap: 8px; 
            flex-wrap: wrap; 
        }
        
        .tag-badge { 
            font-size: 0.75rem; 
            padding: 4px 10px; 
            border-radius: 4px; 
            color: #000; 
            font-weight: 600; 
        }
        
        .tag-space { background-color: #a8d5e2; }
        .tag-vibe { background-color: #e2a8a8; }
        .tag-detail { background-color: #dbe2a8; }

        /* =========================================
           6. í•˜ë‹¨ í‘¸í„° (ì—°ë½ì²˜)
           ========================================= */
        footer {
            background-color: #000000; 
            color: #333333; 
            text-align: center;
            padding: 80px 20px; 
            font-size: 0.85rem; 
            letter-spacing: 0.5px;
        }
        
        footer a { 
            color: #333333; 
            text-decoration: none; 
            border-bottom: 1px solid #333; 
            transition: color 0.3s; 
        }
        
        footer a:hover { 
            color: #666; 
            border-color: #666; 
        }
    </style>
</head>
<body>

    <header id="main-header">
        <h1>sconee Archive</h1>
        <p>Curated Inspiration for Space & Design</p>

        <div class="music-widget">
            <div class="music-mood-btns">
                <button class="mood-btn active" onclick="changeMood('jazz', this)">Jazz</button>
                <button class="mood-btn" onclick="changeMood('chill', this)">Chill</button>
                <button class="mood-btn" onclick="changeMood('classic', this)">Classic</button>
            </div>
            
            <button id="play-btn" onclick="toggleMusic()">â–¶ Play</button>
            
            <div id="youtube-player" style="display: none;"></div>
        </div>
    </header>

    <div class="filter-section">
        <div class="filter-row">
            <span class="filter-label">Space</span>
            <div class="filter-group" id="filter-space">
                <button class="filter-btn active" onclick="filterGallery('space', 'all')">All</button>
            </div>
        </div>
        <div class="filter-row">
            <span class="filter-label">Vibe</span>
            <div class="filter-group" id="filter-vibe">
                <button class="filter-btn active" onclick="filterGallery('vibe', 'all')">All</button>
            </div>
        </div>
        <div class="filter-row">
            <span class="filter-label">Detail</span>
            <div class="filter-group" id="filter-detail">
                <button class="filter-btn active" onclick="filterGallery('detail', 'all')">All</button>
            </div>
        </div>
    </div>

    <div class="gallery-grid" id="gallery-grid"></div>

    <footer>
        If you have any inquiry, send email to <a href="mailto:sconee9@gmail.com">sconee9@gmail.com</a>
    </footer>

    <script>
        // ============================================================
        // 1. ìœ íŠœë¸Œ ë®¤ì§ í”Œë ˆì´ì–´ ì„¤ì •
        // ============================================================
        
        // ğŸ“¢ ì—¬ê¸°ì— PLë¡œ ì‹œì‘í•˜ëŠ” ì¬ìƒëª©ë¡ IDë¥¼ ì •í™•íˆ ë„£ì–´ì£¼ì„¸ìš”.
        const playlists = {
            'jazz': 'PLxjckBrY2dKgyFDHw95kUds2DaCYJJzkY',    // Jazz Playlist
            'chill': 'PLxjckBrY2dKjv04slgG3W39D0nyVdYYoK',   // Chill Playlist
            'classic': 'PLxjckBrY2dKgh7NE23RMnP7GBOJsSR2Jf'  // Classic Playlist
        };

        // ìœ íŠœë¸Œ API ë¶ˆëŸ¬ì˜¤ê¸°
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        var player;
        var currentMood = 'jazz';

        // ìœ íŠœë¸Œ API ì¤€ë¹„ ì™„ë£Œ ì‹œ ì‹¤í–‰
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('youtube-player', {
                height: '0', 
                width: '0',
                playerVars: { 
                    'listType': 'playlist', 
                    'list': playlists[currentMood], 
                    'autoplay': 0, 
                    'loop': 1 
                },
                events: { 
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange, // ìƒíƒœ ë³€í™” ê°ì§€ (ë²„íŠ¼ ê¼¬ì„ ë°©ì§€)
                    'onError': onPlayerError              // ì—ëŸ¬ ê°ì§€ (ì¬ìƒ ë¶ˆê°€ ì‹œ)
                }
            });
        }

        // í”Œë ˆì´ì–´ ì¤€ë¹„ë˜ë©´ ì…”í”Œ(ëœë¤) ì„¤ì •
        function onPlayerReady(event) {
            event.target.setShuffle({'shufflePlaylist': true});
        }

        // ğŸš¨ ì—ëŸ¬ ì²˜ë¦¬: ì¬ìƒëª©ë¡ì´ ë¹„ê³µê°œê±°ë‚˜ ë¬¸ì œê°€ ìˆì„ ë•Œ ê²½ê³ 
        function onPlayerError(event) {
            console.error("YouTube Player Error:", event.data);
            if(event.data === 150 || event.data === 101) {
                alert("ğŸš« ì´ ì¬ìƒëª©ë¡ì€ ì™¸ë¶€ ì‚¬ì´íŠ¸ ì¬ìƒì´ ê¸ˆì§€ë˜ì–´ ìˆìŠµë‹ˆë‹¤. (ìœ íŠœë¸Œ ìŠ¤íŠœë””ì˜¤ ì„¤ì • í™•ì¸)");
            } else if(event.data === 100) {
                alert("ğŸš« ì¬ìƒëª©ë¡ì´ ë¹„ê³µê°œì´ê±°ë‚˜ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
            }
            updateButtonState(false); // ë²„íŠ¼ì„ 'ì •ì§€' ìƒíƒœë¡œ ì´ˆê¸°í™”
        }

        // ğŸ”„ ìƒíƒœ ë³€í™” ê°ì§€: í”Œë ˆì´ì–´ê°€ ë©ˆì¶”ê±°ë‚˜ ì¬ìƒë  ë•Œ ë²„íŠ¼ ëª¨ì–‘ì„ ë°”ê¿ˆ
        function onPlayerStateChange(event) {
            if (event.data == YT.PlayerState.PLAYING) {
                updateButtonState(true);
            } else if (event.data == YT.PlayerState.PAUSED || event.data == YT.PlayerState.ENDED) {
                updateButtonState(false);
            }
        }

        // ë²„íŠ¼ ë””ìì¸ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateButtonState(isPlaying) {
            var btn = document.getElementById('play-btn');
            if (isPlaying) {
                btn.innerText = "â¸ Pause";
                btn.classList.add('playing');
            } else {
                btn.innerText = "â–¶ Play";
                btn.classList.remove('playing');
            }
        }

        // ì‚¬ìš©ìê°€ Play/Pause ë²„íŠ¼ ëˆŒë €ì„ ë•Œ
        function toggleMusic() {
            if (!player || !player.getPlayerState) return;
            var state = player.getPlayerState();
            
            if (state == YT.PlayerState.PLAYING) {
                player.pauseVideo();
            } else {
                player.playVideo();
            }
        }

        // ì‚¬ìš©ìê°€ ì¥ë¥´(Mood) ë²„íŠ¼ ëˆŒë €ì„ ë•Œ
        function changeMood(mood, btnElement) {
            // 1. ë²„íŠ¼ í•˜ì–—ê²Œ í™œì„±í™”
            document.querySelectorAll('.mood-btn').forEach(b => b.classList.remove('active'));
            btnElement.classList.add('active');

            // 2. ì¬ìƒëª©ë¡ êµì²´
            currentMood = mood;
            if (playlists[currentMood]) {
                var isPlayingNow = (player.getPlayerState() == YT.PlayerState.PLAYING);
                
                if (isPlayingNow) {
                    player.loadPlaylist({ list: playlists[currentMood], listType: 'playlist' });
                } else {
                    player.cuePlaylist({ list: playlists[currentMood], listType: 'playlist' });
                }
                
                // 3. êµì²´ í›„ ë‹¤ì‹œ ì…”í”Œ
                setTimeout(() => player.setShuffle({'shufflePlaylist': true}), 1000);
            }
        }


        // ============================================================
        // 2. ê°¤ëŸ¬ë¦¬ ë° í•„í„° ë¡œì§
        // ============================================================
        
        let allData = [];
        let currentFilters = { space: 'all', vibe: 'all', detail: 'all' };

        // data.json íŒŒì¼ ì½ì–´ì˜¤ê¸°
        fetch('data.json')
            .then(response => response.json())
            .then(data => {
                allData = data;
                
                // ìµœì‹  ì‚¬ì§„ì„ í—¤ë” ë°°ê²½ìœ¼ë¡œ ì“°ê¸°
                if(data.length > 0) {
                    document.getElementById('main-header').style.backgroundImage = 
                        `linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.8)), url('${data[0].img}')`;
                }

                generateFilters(data);
                renderGallery(data);
            })
            .catch(error => console.error('Error loading data:', error));

        // íƒœê·¸ ìˆ˜ì§‘í•´ì„œ ë²„íŠ¼ ë§Œë“¤ê¸°
        function generateFilters(data) {
            const spaces = new Set();
            const vibes = new Set();
            const details = new Set();

            data.forEach(item => {
                if (item.space) spaces.add(item.space);
                if (item.vibe) vibes.add(item.vibe);
                if (item.detail) details.add(item.detail);
                
                // ì˜ˆì „ ë°ì´í„° í˜¸í™˜ì„±
                if (item.tags && !item.space) {
                    item.tags.split('|').forEach(t => spaces.add(t.trim()));
                }
            });

            createButtons('filter-space', spaces, 'space');
            createButtons('filter-vibe', vibes, 'vibe');
            createButtons('filter-detail', details, 'detail');
        }

        // ë²„íŠ¼ HTML ìƒì„±ê¸°
        function createButtons(containerId, tagSet, type) {
            const container = document.getElementById(containerId);
            tagSet.forEach(tag => {
                const btn = document.createElement('button');
                btn.className = 'filter-btn';
                btn.innerText = tag;
                btn.onclick = (e) => {
                    container.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    e.target.classList.add('active');
                    filterGallery(type, tag);
                };
                container.appendChild(btn);
            });
        }

        // í•„í„°ë§ ë¡œì§ (AND ì¡°ê±´)
        function filterGallery(type, value) {
            currentFilters[type] = value;

            const filtered = allData.filter(item => {
                const matchSpace = (currentFilters.space === 'all') || 
                                   (item.space === currentFilters.space) || 
                                   (item.tags && item.tags.includes(currentFilters.space));
                
                const matchVibe = (currentFilters.vibe === 'all') || 
                                  (item.vibe === currentFilters.vibe);
                
                const matchDetail = (currentFilters.detail === 'all') || 
                                    (item.detail === currentFilters.detail);

                return matchSpace && matchVibe && matchDetail;
            });

            renderGallery(filtered);
        }

        // í™”ë©´ì— ì‚¬ì§„ ë¿Œë¦¬ê¸°
        function renderGallery(items) {
            const grid = document.getElementById('gallery-grid');
            grid.innerHTML = '';
            
            items.forEach(item => {
                const div = document.createElement('div');
                div.className = 'gallery-item';
                
                let tagsHtml = '';
                if(item.space) tagsHtml += `<span class="tag-badge tag-space">${item.space}</span>`;
                if(item.vibe) tagsHtml += `<span class="tag-badge tag-vibe">${item.vibe}</span>`;
                if(item.detail) tagsHtml += `<span class="tag-badge tag-detail">${item.detail}</span>`;
                if(item.tags && !item.space) tagsHtml += `<span class="tag-badge tag-space">${item.tags}</span>`;

                div.innerHTML = `
                    <a href="${item.img}" target="_blank">
                        <img src="${item.img}" alt="${item.title}" loading="lazy">
                    </a>
                    <div class="info">
                        <h3>${item.title}</h3>
                        <div class="tags-row">${tagsHtml}</div>
                    </div>
                `;
                grid.appendChild(div);
            });
        }
    </script>
</body>
</html>